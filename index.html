let resultadosGenero=[];

    async function mostrarPorGenero(idGenero, tipo){
      modo="generos";
      pagina=1;
      document.getElementById("tituloSeccion").textContent="Género seleccionado";
      await cargarPorGenero(idGenero,tipo);
      mostrarPaginaGenero(idGenero,tipo);
    }

    async function cargarPorGenero(idGenero,tipo){
      const res = await fetch(`https://api.themoviedb.org/3/discover/${tipo}?api_key=${apiKey}&language=es-ES&with_genres=${idGenero}&page=1`);
      const data = await res.json();
      resultadosGenero = data.results;
    }

    function mostrarPaginaGenero(idGenero,tipo){
      document.getElementById("contenedor").innerHTML="";
      let inicio = (pagina-1)*30;
      let fin = inicio+30;
      let paginaItems = resultadosGenero.slice(inicio,fin);

      paginaItems.forEach(item=>{
        renderItem(item,tipo,"contenedor");
      });

      document.getElementById("paginaActual").textContent=pagina;
    }

    function paginaAnterior(){
      if(pagina>1){
        pagina--;
        if(modo==="generos"){
          mostrarPaginaGenero();
        } else {
          mostrarPagina();
        }
      }
    }

    function paginaSiguiente(){
      if(modo==="generos"){
        if(pagina*30 < resultadosGenero.length){
          pagina++;
          mostrarPaginaGenero();
        }
      } else {
        let lista = (modo==="peliculas"?peliculasData:seriesData);
        if(pagina*itemsPorPagina < lista.length){
          pagina++;
          mostrarPagina();
        }
      }
    }

    function mostrarPagina(){
      document.getElementById("contenedor").innerHTML="";
      let lista = (modo==="peliculas"?peliculasData:seriesData);
      let inicio = (pagina-1)*itemsPorPagina;
      let fin = inicio+itemsPorPagina;
      let paginaItems = lista.slice(inicio,fin);

      paginaItems.forEach(item=>{
        renderItem(item,modo==="series"?"tv":"movie","contenedor",item.director||"");
      });

      document.getElementById("paginaActual").textContent=pagina;
    }

    // Inicialización
    (async function(){
      await cargarPeliculas();
      await cargarSeries();
      mostrarPeliculas();
    })();
  </script>
</body>
</html>

